<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../../../displayToc.js"></script>
<script language="JavaScript" src="../../../tocParas.js"></script>
<script language="JavaScript" src="../../../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../../../scineplex.css">
<title></title>
<link rel="stylesheet" href="../../../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#VERSION">VERSION</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a>
    <ul>
      <li><a href="#Structure-of-a-Fact-object">Structure of a Fact object</a></li>
    </ul>
  </li>
  <li><a href="#ATTRIBUTES">ATTRIBUTES</a>
    <ul>
      <li><a href="#Arguments-provided-to-new">Arguments provided to new</a>
        <ul>
          <li><a href="#content-required-">content (required)</a></li>
          <li><a href="#resource-required-">resource (required)</a></li>
          <li><a href="#creator-optional-">creator (optional)</a></li>
          <li><a href="#guid-optional-">guid (optional)</a></li>
        </ul>
      </li>
      <li><a href="#Generated-during-construction">Generated during construction</a>
        <ul>
          <li><a href="#type">type</a></li>
          <li><a href="#schema_version">schema_version</a></li>
          <li><a href="#creation_time">creation_time</a></li>
          <li><a href="#update_time">update_time</a></li>
          <li><a href="#valid">valid</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#CONSTRUCTOR">CONSTRUCTOR</a>
    <ul>
      <li><a href="#new">new</a></li>
    </ul>
  </li>
  <li><a href="#CLASS-METHODS">CLASS METHODS</a>
    <ul>
      <li><a href="#type1">type</a></li>
      <li><a href="#class_from_type">class_from_type</a></li>
      <li><a href="#upgrade_fact">upgrade_fact</a></li>
      <li><a href="#default_schema_version">default_schema_version</a></li>
    </ul>
  </li>
  <li><a href="#PERSISTENCE-METHODS">PERSISTENCE METHODS</a>
    <ul>
      <li><a href="#save">save</a></li>
      <li><a href="#load">load</a></li>
      <li><a href="#as_json">as_json</a></li>
      <li><a href="#from_json">from_json</a></li>
      <li><a href="#as_struct">as_struct</a></li>
      <li><a href="#from_struct">from_struct</a></li>
    </ul>
  </li>
  <li><a href="#OBJECT-METHODS">OBJECT METHODS</a>
    <ul>
      <li><a href="#core_metadata">core_metadata</a></li>
      <li><a href="#core_metadata_types">core_metadata_types</a></li>
      <li><a href="#resource_metadata">resource_metadata</a></li>
      <li><a href="#resource_metadata_types">resource_metadata_types</a></li>
      <li><a href="#set_creator">set_creator</a></li>
      <li><a href="#set_valid">set_valid</a></li>
      <li><a href="#touch">touch</a></li>
    </ul>
  </li>
  <li><a href="#ABSTRACT-METHODS">ABSTRACT METHODS</a>
    <ul>
      <li><a href="#content_as_bytes">content_as_bytes</a></li>
      <li><a href="#content_from_bytes">content_from_bytes</a></li>
      <li><a href="#content_metadata">content_metadata</a></li>
      <li><a href="#content_metadata_types">content_metadata_types</a></li>
      <li><a href="#validate_content">validate_content</a></li>
      <li><a href="#validate_resource">validate_resource</a></li>
    </ul>
  </li>
  <li><a href="#BUGS">BUGS</a></li>
  <li><a href="#SUPPORT">SUPPORT</a>
    <ul>
      <li><a href="#Bugs-Feature-Requests">Bugs / Feature Requests</a></li>
      <li><a href="#Source-Code">Source Code</a></li>
    </ul>
  </li>
  <li><a href="#AUTHORS">AUTHORS</a></li>
  <li><a href="#COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Metabase::Fact - base class for Metabase Facts</p>

<h1 id="VERSION">VERSION</h1>

<p>version 0.021</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>  <span class="comment"># defining the fact class</span>
  <span class="keyword">package</span> <span class="variable">MyFact</span><span class="operator">;</span>
  <span class="keyword">use</span> <span class="variable">Metabase::Fact::Hash</span><span class="operator">;</span>
  <span class="keyword">our</span> <span class="variable">@ISA</span> <span class="operator">=</span> <span class="string">qw/Metabase::Fact::Hash/</span><span class="operator">;</span>
  
  <span class="comment"># using the fact class</span>
  <span class="keyword">my</span> <span class="variable">$fact</span> <span class="operator">=</span> <span class="variable">TestReport</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span>
    <span class="string">resource</span>   <span class="operator">=&gt;</span> <span class="string">'RJBS/Metabase-Fact-0.001.tar.gz'</span><span class="operator">,</span>
    <span class="string">content</span>    <span class="operator">=&gt;</span> <span class="operator">{</span>
      <span class="string">status</span> <span class="operator">=&gt;</span> <span class="string">'FAIL'</span><span class="operator">,</span>
      <span class="string">time</span>   <span class="operator">=&gt;</span> <span class="number">3029</span><span class="operator">,</span>
    <span class="operator">}</span><span class="operator">,</span>
  <span class="operator">);</span>
  
  <span class="variable">$client</span><span class="operator">-&gt;</span><span class="variable">send_fact</span><span class="operator">(</span><span class="variable">$fact</span><span class="operator">);</span>
</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p><a>Metabase</a> is a framework for associating content and metadata with arbitrary resources. A Metabase can be used to store test reports, reviews, coverage analysis reports, reports on static analysis of coding style, or anything else for which datatypes are constructed.</p>

<p>Metabase::Fact is a base class for Facts (really opinions or analyses) that can be sent to or retrieved from a Metabase repository.</p>

<h2 id="Structure-of-a-Fact-object">Structure of a Fact object</h2>

<p>A Fact object associates a <code>content</code> attribute with a <code>resource</code> attribute and a <code>creator</code> attribute.</p>

<p>The <code>resource</code> attribute must be in a URI format that can be validated via a <a href="../../../cpan/build/Metabase-Fact-0.021-fbjRp3/blib/lib/Metabase/Resource.html">Metabase::Resource</a> subclass. The <code>content</code> attribute is an opaque scalar with subclass-specific meaning. The <code>creator</code> attribute is a URI with a &quot;metabase:user&quot; scheme and type (see <a href="../../../cpan/build/Metabase-Fact-0.021-fbjRp3/blib/lib/Metabase/Resource/metabase.html">Metabase::Resource::metabase</a>).</p>

<p>Facts have three sets of metadata associate with them. Metadata are generally for use in indexing, searching and managing Facts.</p>

<ul>

<li><p><code>core metadata</code> describe universal properties of all Facts and are used to submit, store, manage and retrieve Facts within the Metabase framework.</p>

</li>
<li><p><code>resource metadata</code> describe index properties derived from the <code>resource</code> attribute. (As these can be regenerated from the <code>resource</code> -- which is part of <code>core metadata</code> -- they are not stored with a serialized Fact.)</p>

</li>
<li><p><code>content metadata</code> describe index properties derived from the <code>content</code> attribute. (As these can be regenerated from the <code>content</code> -- which is part of <code>core metadata</code> -- they are not stored with a serialized Fact.)</p>

</li>
</ul>

<p>Each of the three metadata sets has an associated accessor: <code>core_metadata</code>, <code>resource_metadata</code> and <code>content_metadata</code>.</p>

<p>Each of the three sets also has an accessor that returns a hashref with a data type for each possible element in the set: <code>core_metadata_types</code>, <code>resource_metadata_types</code> and <code>content_metadata_types</code>.</p>

<p>Data types are loosely based on <a>Data::RX</a>. For example:</p>

<pre><code>  &#39;//str&#39;  -- indicates a value that should be compared stringwise
  &#39;//num&#39;  -- indicates a value that should be compared numerically
  &#39;//bool&#39; -- indicates a valut that is true or false</code></pre>

<p>When searching on metadata, you must join the set name to the metadata element name with a period character. For example:</p>

<pre><code>  core.guid
  core.creator
  core.resource
  resource.scheme
  content.size
  content.score</code></pre>

<h1 id="ATTRIBUTES">ATTRIBUTES</h1>

<p>Unless otherwise noted, all attributes are read-only and are either provided as arguments to the constructor or are generated during construction. All attributes (except <code>content</code>) are also part of <code>core metadata</code>.</p>

<h2 id="Arguments-provided-to-new">Arguments provided to new</h2>

<h3 id="content-required-">content (required)</h3>

<p>A reference to the actual information associated with the fact. The exact form of the content is up to each Fact class to determine.</p>

<h3 id="resource-required-">resource (required)</h3>

<p>The canonical resource (URI) the Fact relates to. For CPAN distributions, this would be a <code>cpan:///distfile/...</code> URI. (See <a>URI::cpan</a>.) The associated accessor returns a Metabase::Resource subclass.</p>

<h3 id="creator-optional-">creator (optional)</h3>

<p>A <a href="../../../cpan/build/Metabase-Fact-0.021-fbjRp3/blib/lib/Metabase/User/Profile.html">Metabase::User::Profile</a> URI that indicates the creator of the Fact. If not set during Fact creation, it will be set by the Metabase when a Fact is submitted based on the submitter Profile. The <code>set_creator</code> mutator may be called to set <code>creator</code>, but only if it is not previously set. The associated accessor returns a Metabase::Resource subclass or <code>undef</code> if the creator has not been set.</p>

<h3 id="guid-optional-">guid (optional)</h3>

<p>The Fact object&#39;s Globally Unique IDentifier. This is generated automatically if not provided. Generally, users should not provide a <code>guid</code> argument, but it is permitted for use in special cases where a non-random <code>guid</code> is necessary.</p>

<h2 id="Generated-during-construction">Generated during construction</h2>

<p>These attributes are generated automatically during the call to <code>new</code>.</p>

<h3 id="type">type</h3>

<p>The class name, with double-colons converted to dashes to be more URI-friendly. e.g. <code>Metabase::Fact</code> would be <code>Metabase-Fact</code>.</p>

<h3 id="schema_version">schema_version</h3>

<p>The <code>schema_version</code> of the Fact subclass that created the object. This may or may not be the same as the current <code>schema_version</code> of the class if newer versions of the class have been released since the object was created.</p>

<h3 id="creation_time">creation_time</h3>

<p>Fact creation time in UTC expressed in extended ISO 8601 format with a &quot;Z&quot; (Zulu) suffix. For example:</p>

<pre><code>  2010-01-10T12:34:56Z</code></pre>

<h3 id="update_time">update_time</h3>

<p>When the fact was created, stored or otherwise updated, expressed an ISO 8601 UTC format as with <code>creation_time</code>. The <code>touch</code> method may be called at any time to update the value to the current time. This attribute generally only has local significance within a particular Metabase repository. For example, it may be used to sort Facts by when they were stored or changed in a Metabase.</p>

<h3 id="valid">valid</h3>

<p>A boolean value indicating whether the fact is considered valid. It defaults to true. The <code>set_valid</code> method may be called to change the <code>valid</code> property, for example, to mark a fact invalid rather than deleting it. The value of <code>valid</code> is always normalized to return &quot;1&quot; for true and &quot;0&quot; for false.</p>

<h1 id="CONSTRUCTOR">CONSTRUCTOR</h1>

<h2 id="new">new</h2>

<pre><code>  <span class="variable">$fact</span> <span class="operator">=</span> <span class="variable">MyFact</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span>
    <span class="string">resource</span> <span class="operator">=&gt;</span> <span class="string">'AUTHORID/Foo-Bar-1.23.tar.gz'</span><span class="operator">,</span>
    <span class="string">content</span> <span class="operator">=&gt;</span> <span class="variable">$content_structure</span><span class="operator">,</span>
  <span class="operator">);</span>
</code></pre>

<p>Constructs a new Fact. The <code>resource</code> and <code>content</code> attributes are required. No other attributes should be provided to <code>new</code> except <code>creator</code>.</p>

<h1 id="CLASS-METHODS">CLASS METHODS</h1>

<h2 id="type1">type</h2>

<pre><code>  <span class="variable">$type</span> <span class="operator">=</span> <span class="variable">MyFact</span><span class="operator">-&gt;</span><span class="variable">type</span><span class="operator">;</span>
</code></pre>

<p>The <code>type</code> accessor may also be called as a class method.</p>

<h2 id="class_from_type">class_from_type</h2>

<pre><code>  <span class="variable">$class</span> <span class="operator">=</span> <span class="variable">MyFact</span><span class="operator">-&gt;</span><span class="variable">class_from_type</span><span class="operator">(</span> <span class="variable">$type</span> <span class="operator">);</span>
</code></pre>

<p>A utility function to invert the operation of the <code>type</code> method.</p>

<h2 id="upgrade_fact">upgrade_fact</h2>

<pre><code>  <span class="variable">MyFact</span><span class="operator">-&gt;</span><span class="variable">upgrade_fact</span><span class="operator">(</span> <span class="variable">$struct</span> <span class="operator">);</span>
</code></pre>

<p>This method will be called when initializing a fact from a data structure that claims to be of a schema version other than the schema version reported by the loaded class&#39;s <code>default_schema_version</code> method. It will be passed the hashref of args being used to initialized the fact object (generally the output of <code>as_struct</code> from an older version), and should alter that hash in place.</p>

<h2 id="default_schema_version">default_schema_version</h2>

<pre><code>  <span class="variable">$version</span> <span class="operator">=</span> <span class="variable">MyFact</span><span class="operator">-&gt;</span><span class="variable">default_schema_version</span><span class="operator">;</span>
</code></pre>

<p>Defaults to 1. Subclasses should override this method if they make a backwards-incompatible change to the internals of the content attribute. Schema version numbers should be monotonically-increasing integers. The default schema version is used to set an objects schema_version attribution on creation.</p>

<h1 id="PERSISTENCE-METHODS">PERSISTENCE METHODS</h1>

<p>The following methods are implemented by Metabase::Fact and subclasses generally should not need to override them.</p>

<h2 id="save">save</h2>

<pre><code>  <span class="variable">$fact</span><span class="operator">-&gt;</span><span class="variable">save</span><span class="operator">(</span><span class="variable">$filename</span><span class="operator">);</span>
</code></pre>

<p>This method writes out the fact to a file in JSON format. If the file cannot be written, an exception is raised. If the save is successful, a true value is returned. Internally, it calls <code>as_json</code>.</p>

<h2 id="load">load</h2>

<pre><code>  <span class="keyword">my</span> <span class="variable">$fact</span> <span class="operator">=</span> <span class="variable">Metabase::Fact</span><span class="operator">-&gt;</span><span class="variable">load</span><span class="operator">(</span><span class="variable">$filename</span><span class="operator">);</span>
</code></pre>

<p>This method loads a fact from a JSON format file and returns it. If the file cannot be read or is not valid JSON, and exception is thrown. Internally, it calls <code>from_json</code>.</p>

<h2 id="as_json">as_json</h2>

<p>This returns a JSON string containing the serialized object. Internally, it calls <code>as_struct</code>.</p>

<h2 id="from_json">from_json</h2>

<p>This method regenerates a fact from a JSON string generated by <code>as_json</code>. Internally, it calls <code>from_struct</code>.</p>

<h2 id="as_struct">as_struct</h2>

<p>This returns a simple data structure that represents the fact and can be used for transmission over the wire. It serializes the content and core metadata, but not other metadata, which should be recomputed by the receiving end.</p>

<h2 id="from_struct">from_struct</h2>

<pre><code>  <span class="keyword">my</span> <span class="variable">$fact</span> <span class="operator">=</span> <span class="variable">Metabase::Fact</span><span class="operator">-&gt;</span><span class="variable">from_struct</span><span class="operator">(</span> <span class="variable">$struct</span> <span class="operator">);</span>
</code></pre>

<p>This takes the output of the <code>as_struct</code> method and reconstitutes a Fact object. If the class the struct represents is not loaded, <code>from_struct</code> will attempt to load the class or will throw an error.</p>

<h1 id="OBJECT-METHODS">OBJECT METHODS</h1>

<p>The following methods are implemented by Metabase::Fact and subclasses generally should not need to override them.</p>

<h2 id="core_metadata">core_metadata</h2>

<p>This returns a hashref containing the fact&#39;s core metadata. This includes things like the guid, creation time, described resource, and so on.</p>

<h2 id="core_metadata_types">core_metadata_types</h2>

<p>This returns a hashref of types for each core metadata element</p>

<h2 id="resource_metadata">resource_metadata</h2>

<p>This method returns metadata describing the resource.</p>

<h2 id="resource_metadata_types">resource_metadata_types</h2>

<p>This returns a hashref of types for each resource metadata element</p>

<h2 id="set_creator">set_creator</h2>

<pre><code>  <span class="variable">$fact</span><span class="operator">-&gt;</span><span class="variable">set_creator</span><span class="operator">(</span><span class="variable">$profile_uri</span><span class="operator">);</span>
</code></pre>

<p>This method sets the <code>creator</code> core metadata for the core metadata for the fact. If the fact&#39;s <code>creator</code> is already set, an exception will be thrown.</p>

<h2 id="set_valid">set_valid</h2>

<pre><code>  <span class="variable">$fact</span><span class="operator">-&gt;</span><span class="variable">set_valid</span><span class="operator">(</span><span class="number">0</span><span class="operator">);</span>
</code></pre>

<p>This method sets the <code>valid</code> core metadata to a boolean value.</p>

<h2 id="touch">touch</h2>

<pre><code>  $fact-&gt;touch</code></pre>

<p>This method sets the <code>update_time</code> core metadata for the core metadata for the fact to the current time in ISO 8601 UTC format with a trailing &quot;Z&quot; (Zulu) suffice.</p>

<h1 id="ABSTRACT-METHODS">ABSTRACT METHODS</h1>

<p>Methods marked as <i>required</i> must be implemented by a Fact subclass. (The version in Metabase::Fact will die with an error if called.)</p>

<p>In the documentation below, the terms <i>must</i>, <i>must not</i>, <i>should</i>, etc. have their usual RFC 2119 meanings.</p>

<p>These methods MUST throw an exception if an error occurs.</p>

<h2 id="content_as_bytes">content_as_bytes</h2>

<p><b>required</b></p>

<pre><code>  <span class="variable">$string</span> <span class="operator">=</span> <span class="variable">$fact</span><span class="operator">-&gt;</span><span class="variable">content_as_bytes</span><span class="operator">;</span>
</code></pre>

<p>This method MUST serialize a Fact&#39;s content as bytes in a scalar and return it. The method for serialization is up to the individual fact class to determine. Some common subclasses are available to handle serialization for common data types. See <a href="../../../cpan/build/Metabase-Fact-0.021-fbjRp3/blib/lib/Metabase/Fact/Hash.html">Metabase::Fact::Hash</a> and <a href="../../../cpan/build/Metabase-Fact-0.021-fbjRp3/blib/lib/Metabase/Fact/String.html">Metabase::Fact::String</a>.</p>

<h2 id="content_from_bytes">content_from_bytes</h2>

<p><b>required</b></p>

<pre><code>  <span class="variable">$content</span> <span class="operator">=</span> <span class="variable">$fact</span><span class="operator">-&gt;</span><span class="variable">content_from_bytes</span><span class="operator">(</span> <span class="variable">$string</span> <span class="operator">);</span>
  <span class="variable">$content</span> <span class="operator">=</span> <span class="variable">$fact</span><span class="operator">-&gt;</span><span class="variable">content_from_bytes</span><span class="operator">(</span> <span class="operator">\</span><span class="variable">$string</span> <span class="operator">);</span>
</code></pre>

<p>Given a scalar, this method MUST regenerate and return the original content data structure. It MUST accept either a string or string reference as an argument. It MUST NOT overwrite the Fact&#39;s content attribute directly.</p>

<h2 id="content_metadata">content_metadata</h2>

<p><b>optional</b></p>

<pre><code>  <span class="variable">$content_meta</span> <span class="operator">=</span> <span class="variable">$fact</span><span class="operator">-&gt;</span><span class="variable">content_metadata</span><span class="operator">;</span>
</code></pre>

<p>If provided, this method MUST return a hash reference with content-specific indexing metadata. The key MUST be the name of the field for indexing and SHOULD provide dimensions to differentiate one set of content from another. Values MUST be simple scalars, not references.</p>

<p>Here is a hypothetical example of <code>content_metadata</code> for an image fact:</p>

<pre><code>  <span class="keyword">sub</span><span class="variable"> content_metadata </span><span class="operator">{</span>
    <span class="keyword">my</span> <span class="variable">$self</span> <span class="operator">=</span> <span class="keyword">shift</span><span class="operator">;</span>
    <span class="keyword">return</span> <span class="operator">{</span>
      <span class="string">width</span>   <span class="operator">=&gt;</span> <span class="variable">_compute_width</span>  <span class="operator">(</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">content</span> <span class="operator">),</span>
      <span class="string">height</span>  <span class="operator">=&gt;</span> <span class="variable">_compute_height</span> <span class="operator">(</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">content</span> <span class="operator">),</span>
      <span class="string">caption</span> <span class="operator">=&gt;</span> <span class="variable">_extract_caption</span><span class="operator">(</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">content</span> <span class="operator">),</span>
    <span class="operator">}</span>
  <span class="operator">}</span>
</code></pre>

<p>Field names should be valid perl identifiers, consisting of alphanumeric characters or underscores. Hyphens and periods are allowed, but are not recommended.</p>

<h2 id="content_metadata_types">content_metadata_types</h2>

<p><b>optional</b></p>

<pre><code>  <span class="keyword">my</span> <span class="variable">$typemap</span> <span class="operator">=</span> <span class="variable">$fact</span><span class="operator">-&gt;</span><span class="variable">content_metadata_types</span><span class="operator">;</span>
</code></pre>

<p>This method is used to identify the datatypes of keys in the data structure provided by <code>content_metadata</code>. If provided, it MUST return a hash reference. It SHOULD contain a key for every key that could appear in the data structure generated by <code>content_metadata</code> and provide a value corresponding to a datatype for each key. It MAY contain keys that do not always appear in the result of <code>content_metadata</code>.</p>

<p>Data types are loosely based on <a>Data::RX</a>. Type SHOULD be one of the following:</p>

<pre><code>  &#39;//str&#39; -- indicates a value that should be compared stringwise
  &#39;//num&#39; -- indicates a value that should be compared numerically
  &#39;//bool&#39; -- indicates a boolean value where &quot;1&quot; is true and &quot;0&quot; is false</code></pre>

<p>Here is a hypothetical example of <code>content_metadata_types</code> for an image fact:</p>

<pre><code>  <span class="keyword">sub</span><span class="variable"> content_metadata_types </span><span class="operator">{</span>
    <span class="keyword">return</span> <span class="operator">{</span>
      <span class="string">width</span>   <span class="operator">=&gt;</span> <span class="string">'//num'</span><span class="operator">,</span>
      <span class="string">height</span>  <span class="operator">=&gt;</span> <span class="string">'//num'</span><span class="operator">,</span>
      <span class="string">caption</span> <span class="operator">=&gt;</span> <span class="string">'//str'</span><span class="operator">,</span>
    <span class="operator">}</span>
  <span class="operator">}</span>
</code></pre>

<p>Consumers of <code>content_metadata_types</code> SHOULD assume that any <code>content_metadata</code> key not found in the result of <code>content_metadata_types</code> is a &#39;//str&#39; resource.</p>

<h2 id="validate_content">validate_content</h2>

<p><b>required</b></p>

<pre><code> <span class="keyword">eval</span> <span class="operator">{</span> <span class="variable">$fact</span><span class="operator">-&gt;</span><span class="variable">validate_content</span> <span class="operator">};</span>
</code></pre>

<p>This method SHOULD check for the validity of content within the Fact. It MUST throw an exception if the fact content is invalid. (The return value is ignored.)</p>

<h2 id="validate_resource">validate_resource</h2>

<p><b>optional</b></p>

<pre><code> <span class="keyword">eval</span> <span class="operator">{</span> <span class="variable">$fact</span><span class="operator">-&gt;</span><span class="variable">validate_resource</span> <span class="operator">};</span>
</code></pre>

<p>This method SHOULD check whether the resource type is relevant for the Fact subclass. It SHOULD use <a href="../../../cpan/build/Metabase-Fact-0.021-fbjRp3/blib/lib/Metabase/Resource.html">Metabase::Resource</a> to create a resource object and evaluate the resource object scheme and type. It MUST throw an exception if the resource type is invalid. Otherwise, it MUST return a valid Metabase::Resource subclass. For example:</p>

<pre><code>  <span class="keyword">sub</span><span class="variable"> validate_resource </span><span class="operator">{</span>
    <span class="keyword">my</span> <span class="operator">(</span><span class="variable">$self</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
    <span class="comment"># Metabase::Resource-&gt;new dies if invalid</span>
    <span class="keyword">my</span> <span class="variable">$obj</span> <span class="operator">=</span> <span class="variable">Metabase::Resource</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">resource</span><span class="operator">);</span>
    <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$obj</span><span class="operator">-&gt;</span><span class="variable">scheme</span> <span class="keyword">eq</span> <span class="string">'cpan'</span> <span class="operator">&amp;&amp;</span> <span class="variable">$obj</span><span class="operator">-&gt;</span><span class="variable">type</span> <span class="keyword">eq</span> <span class="string">'distfile'</span><span class="operator">)</span> <span class="operator">{</span>
      <span class="keyword">return</span> <span class="variable">$obj</span><span class="operator">;</span>
    <span class="operator">}</span>
    <span class="keyword">else</span> <span class="operator">{</span>
      <span class="keyword">my</span> <span class="variable">$fact_type</span> <span class="operator">=</span> <span class="variable">$self</span><span class="operator">-&gt;</span><span class="variable">type</span><span class="operator">;</span>
      <span class="variable">Carp::confess</span><span class="operator">(</span><span class="string">"'</span><span class="variable">$resource</span><span class="string">' does not apply to '</span><span class="variable">$fact_type</span><span class="string">'"</span><span class="operator">);</span>
    <span class="operator">}</span>
  <span class="operator">}</span>
</code></pre>

<p>The default <code>validate_resource</code> accepts any resource that can initialize a <code>Metabase::Resource</code> object.</p>

<h1 id="BUGS">BUGS</h1>

<p>Please report any bugs or feature using the CPAN Request Tracker. Bugs can be submitted through the web interface at <a href="http://rt.cpan.org/Dist/Display.html?Queue=Metabase-Fact">http://rt.cpan.org/Dist/Display.html?Queue=Metabase-Fact</a></p>

<p>When submitting a bug or request, please include a test-file or a patch to an existing test-file that illustrates the bug or desired feature.</p>

<h1 id="SUPPORT">SUPPORT</h1>

<h2 id="Bugs-Feature-Requests">Bugs / Feature Requests</h2>

<p>Please report any bugs or feature requests through the issue tracker at <a href="http://rt.cpan.org/Public/Dist/Display.html?Name=Metabase-Fact">http://rt.cpan.org/Public/Dist/Display.html?Name=Metabase-Fact</a>. You will be notified automatically of any progress on your issue.</p>

<h2 id="Source-Code">Source Code</h2>

<p>This is open source software. The code repository is available for public review and contribution under the terms of the license.</p>

<p><a href="https://github.com/dagolden/metabase-fact">https://github.com/dagolden/metabase-fact</a></p>

<pre><code>  git clone https://github.com/dagolden/metabase-fact.git</code></pre>

<h1 id="AUTHORS">AUTHORS</h1>

<ul>

<li><p>David Golden &lt;dagolden@cpan.org&gt;</p>

</li>
<li><p>Ricardo Signes &lt;rjbs@cpan.org&gt;</p>

</li>
<li><p>H.Merijn Brand &lt;hmbrand@cpan.org&gt;</p>

</li>
</ul>

<h1 id="COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</h1>

<p>This software is Copyright (c) 2012 by David Golden.</p>

<p>This is free software, licensed under:</p>

<pre><code>  The Apache License, Version 2.0, January 2004</code></pre>


</body>

</html>


