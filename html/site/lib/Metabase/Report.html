<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../../../displayToc.js"></script>
<script language="JavaScript" src="../../../tocParas.js"></script>
<script language="JavaScript" src="../../../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../../../scineplex.css">
<title></title>
<link rel="stylesheet" href="../../../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#VERSION">VERSION</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#SUBCLASSING">SUBCLASSING</a></li>
  <li><a href="#ATTRIBUTES">ATTRIBUTES</a>
    <ul>
      <li>
        <ul>
          <li><a href="#content">content</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#METHODS">METHODS</a>
    <ul>
      <li><a href="#open">open</a></li>
      <li><a href="#add">add</a></li>
      <li><a href="#close">close</a></li>
      <li><a href="#facts">facts</a></li>
    </ul>
  </li>
  <li><a href="#CLASS-METHODS">CLASS METHODS</a>
    <ul>
      <li><a href="#fact_classes">fact_classes</a></li>
      <li><a href="#load_fact_classes">load_fact_classes</a></li>
    </ul>
  </li>
  <li><a href="#ABSTRACT-METHODS">ABSTRACT METHODS</a>
    <ul>
      <li><a href="#report_spec">report_spec</a></li>
    </ul>
  </li>
  <li><a href="#BUGS">BUGS</a></li>
  <li><a href="#AUTHORS">AUTHORS</a></li>
  <li><a href="#COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Metabase::Report - a base class for collections of Metabase facts</p>

<h1 id="VERSION">VERSION</h1>

<p>version 0.021</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>  <span class="keyword">package</span> <span class="variable">MyReport</span><span class="operator">;</span>
  
  <span class="keyword">use</span> <span class="variable">Metabase::Report</span><span class="operator">;</span>
  <span class="keyword">our</span> <span class="variable">@ISA</span> <span class="operator">=</span> <span class="string">qw/Metabase::Report/</span><span class="operator">;</span>
  <span class="keyword">__PACKAGE__</span><span class="operator">-&gt;</span><span class="variable">load_fact_classes</span><span class="operator">;</span>
  
  <span class="keyword">sub</span><span class="variable"> report_spec </span><span class="operator">{</span>
    <span class="keyword">return</span> <span class="operator">{</span>
      <span class="string">'Fact::One'</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span>     <span class="comment"># one of Fact::One</span>
      <span class="string">'Fact::Two'</span> <span class="operator">=&gt;</span> <span class="string">"0+"</span><span class="operator">,</span>  <span class="comment"># zero or more of Fact::Two</span>
    <span class="operator">}</span>
  <span class="operator">}</span>
</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p><a>Metabase</a> is a system for associating metadata with CPAN distributions. The metabase can be used to store test reports, reviews, coverage analysis reports, reports on static analysis of coding style, or anything else for which datatypes are constructed.</p>

<p>Metabase::Report is a base class for collections of Metabase::Fact objects that can be sent to or retrieved from a Metabase system.</p>

<p>Metabase::Report is itself a subclass of Metabase::Fact and offers the same API, except as described below.</p>

<h1 id="SUBCLASSING">SUBCLASSING</h1>

<p>A subclass of Metabase::Report only requires one method, <a href="#report_spec"><code>&quot;report_spec&quot;</code></a>.</p>

<h1 id="ATTRIBUTES">ATTRIBUTES</h1>

<h3 id="content">content</h3>

<p>The <code>content</code> attribute of a Report must be a reference to an array of Metabase::Fact subclass objects.</p>

<h1 id="METHODS">METHODS</h1>

<p>In addition to the standard <code>new</code> constructor, the following <code>open</code>, <code>add</code> and <code>close</code> methods may be used to construct a report piecemeal, instead.</p>

<h2 id="open">open</h2>

<pre><code>  <span class="variable">$report</span> <span class="operator">=</span> <span class="variable">Report::Subclass</span><span class="operator">-&gt;</span><span class="variable">open</span><span class="operator">(</span>
    <span class="string">id</span> <span class="operator">=&gt;</span> <span class="string">'AUTHORID/Foo-Bar-1.23.tar.gz'</span><span class="operator">,</span>
  <span class="operator">);</span>
</code></pre>

<p>Constructs a new, empty report. The &#39;id&#39; attribute is required. The &#39;refers_to&#39; attribute is optional. The &#39;content&#39; attribute may be provided, but see <code>add</code> below. No other attributes may be provided to <code>new</code>.</p>

<h2 id="add">add</h2>

<pre><code>  <span class="variable">$report</span><span class="operator">-&gt;</span><span class="variable">add</span><span class="operator">(</span> <span class="string">'Fact::Subclass'</span> <span class="operator">=&gt;</span> <span class="variable">$content</span> <span class="operator">);</span>
</code></pre>

<p>Using the &#39;id&#39; attribute of the report, this method constructs a new Fact from a class and a content argument. The resulting Fact is appended to the Report&#39;s content array.</p>

<h2 id="close">close</h2>

<pre><code>  <span class="variable">$report</span><span class="operator">-&gt;</span><span class="variable">close</span><span class="operator">;</span>
</code></pre>

<p>This method validates the report based on all Facts added so far.</p>

<h2 id="facts">facts</h2>

<p>This method returns a list of all the facts in the report. In scalar context, it returns the number of facts in the report.</p>

<h1 id="CLASS-METHODS">CLASS METHODS</h1>

<h2 id="fact_classes">fact_classes</h2>

<h2 id="load_fact_classes">load_fact_classes</h2>

<p>Loads each class listed in the report spec.</p>

<h1 id="ABSTRACT-METHODS">ABSTRACT METHODS</h1>

<p>Methods marked as &#39;required&#39; must be implemented by a report subclass. (The version in Metabase::Report will die with an error if called.)</p>

<p>In the documentation below, the terms &#39;must, &#39;must not&#39;, &#39;should&#39;, etc. have their usual RFC 2119 meanings.</p>

<p>Methods MUST throw an exception if an error occurs.</p>

<h2 id="report_spec">report_spec</h2>

<p><b>required</b></p>

<pre><code>  <span class="variable">$spec</span> <span class="operator">=</span> <span class="variable">Report::Subclass</span><span class="operator">-&gt;</span><span class="variable">report_spec</span><span class="operator">;</span>
</code></pre>

<p>The <code>report_spec</code> method MUST return a hash reference that defines how many Facts of which types must be in the report for it to be considered valid. Keys MUST be class names. Values MUST be non-negative integers that indicate the number of Facts of that type that must be present for a report to be valid, optionally followed by a &#39;+&#39; character to indicate that the report may contain more than the given number.</p>

<p>For example:</p>

<pre><code>  <span class="operator">{</span>
    <span class="variable">Fact::One</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span>     <span class="comment"># one of Fact::One</span>
    <span class="variable">Fact::Two</span> <span class="operator">=&gt;</span> <span class="string">"0+"</span><span class="operator">,</span>  <span class="comment"># zero or more of Fact::Two</span>
  <span class="operator">}</span>
</code></pre>

<h1 id="BUGS">BUGS</h1>

<p>Please report any bugs or feature using the CPAN Request Tracker. Bugs can be submitted through the web interface at <a href="http://rt.cpan.org/Dist/Display.html?Queue=Metabase-Fact">http://rt.cpan.org/Dist/Display.html?Queue=Metabase-Fact</a></p>

<p>When submitting a bug or request, please include a test-file or a patch to an existing test-file that illustrates the bug or desired feature.</p>

<h1 id="AUTHORS">AUTHORS</h1>

<ul>

<li><p>David Golden &lt;dagolden@cpan.org&gt;</p>

</li>
<li><p>Ricardo Signes &lt;rjbs@cpan.org&gt;</p>

</li>
<li><p>H.Merijn Brand &lt;hmbrand@cpan.org&gt;</p>

</li>
</ul>

<h1 id="COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</h1>

<p>This software is Copyright (c) 2012 by David Golden.</p>

<p>This is free software, licensed under:</p>

<pre><code>  The Apache License, Version 2.0, January 2004</code></pre>


</body>

</html>


